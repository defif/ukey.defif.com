(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-316d603d"],{"5b0c":function(e,t,r){"use strict";r.r(t);var s=(r("cb29"),r("a15b"),r("fb6a"),r("b0c0"),r("d3b7"),r("25f0"),r("96cf"),r("1da1")),a=r("5530"),n=r("c9c7"),c=r.n(n),o=r("c947"),d=r("d044"),i=r.n(d),u=r("5880"),l=r("48b8"),f={name:"Receive",mixins:[r("7ca6").a],data:function(){return{d_maxReceiveAddress:20,d_tab:null,d_overlay:!1,d_snackbar:!1,d_receiveList:[],d_addressList:[],d_selectedId:-1,d_currentInex:0,d_currentAddress:"0",d_alertShow:!1,d_errorText:""}},computed:Object(a.a)(Object(a.a)({},Object(u.mapState)(["usb","pageLoading"])),{},{c_coinInfo:function(e){return e.$store.__s("coinInfo")},c_chooseType:function(e){return e.$store.__s("dialog.chooseType")},c_protocol:function(e){return e.$store.__s("coinProtocol")}}),watch:{c_chooseType:function(e){e&&this._hideOverlay()}},created:function(){this.getUsedTokens()},methods:{receiveCoin:function(e){return c()(e,"sat_".concat(this.c_coinInfo.symbol)).toString()},clickAddress:function(e,t){this.d_overlay||this._showOverlay(e,t)},_showOverlay:function(e,t){var r=this;return Object(s.a)(regeneratorRuntime.mark((function s(){var a;return regeneratorRuntime.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return r.d_selectedId=e,r._qrcode(r.d_addressList[r.d_selectedId].newAddress),a=Object(l.b)(t),r.d_overlay=!0,document.getElementsByClassName("qr")[0].style.top=a.y-80+"px",s.next=7,r.$usb.cmd("GetAddress",{coin_name:r.c_coinInfo.name,address_n:[(2147483648|r.c_protocol)>>>0,(2147483648|r.coinInfo.slip44)>>>0,2147483648,0,r.d_addressList[r.d_selectedId].index],script_type:49===r.c_protocol?"SPENDP2SHWITNESS":"SPENDADDRESS",show_display:!0});case 7:r._hideOverlay();case 8:case"end":return s.stop()}}),s)})))()},_hideOverlay:function(){this.d_selectedId=-1,this.d_overlay=!1},_qrcode:function(e){return document.getElementById("qrcode").innerHTML="",new i.a("qrcode",{width:132,height:132,text:e,colorDark:"#000",colorLight:"#fff"})},copyAddress:function(){if(this.d_overlay)try{Object(l.a)(this.d_addressList[this.d_selectedId].newAddress),this.showAlert(this.$t("Address has been copied to clipboard"))}catch(e){this.showAlert(this.$t("Copy failed!"))}},getUsedTokens:function(){var e=this;return Object(s.a)(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.$store.__s("pageLoading",!0),r=null,t.prev=2,t.next=5,o.b.HistoryByXpub({coinName:e.c_coinInfo.symbol,xpub:e.usb.xpub});case 5:r=t.sent,t.next=12;break;case 8:t.prev=8,t.t0=t.catch(2),e.$store.__s("pageLoading",!1),e.$message.error(e.$t("Network Error!"));case 12:e.d_receiveList=r.tokens?r.tokens:[],e.d_currentInex=r.usedTokens?r.usedTokens:"0",e.d_currentAddress=e.d_currentInex,e.getAddr(),e.$store.__s("pageLoading",!1);case 17:case"end":return t.stop()}}),t,null,[[2,8]])})))()},getAddr:function(){var e=this;return Object(s.a)(regeneratorRuntime.mark((function t(){var r,s,a,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e.d_addressList.length>e.d_maxReceiveAddress)){t.next=4;break}return e.showAlert(e.$t("Payment address cannot exceed 20 Each")),e.$store.__s("pageLoading",!1),t.abrupt("return");case 4:return t.prev=4,t.next=7,e.$usb.cmd("GetAddress",{coin_name:e.c_coinInfo.name,address_n:[(2147483648|e.c_protocol)>>>0,(2147483648|e.coinInfo.slip44)>>>0,2147483648,0,e.d_currentInex],script_type:49===e.c_protocol?"SPENDP2SHWITNESS":"SPENDADDRESS",show_display:!1});case 7:r=t.sent,e.d_currentAddress=r.data.address,s=e.d_currentAddress.length,a=e.d_currentAddress.slice(0,4)+new Array(s-8).fill("#").join("")+e.d_currentAddress.slice(s-8+4),n={index:e.d_currentInex++,newAddress:e.d_currentAddress,hideAddress:a},e.d_addressList.push(n),t.next=18;break;case 15:t.prev=15,t.t0=t.catch(4),e.showAlert(e.$t("Get device address error"));case 18:case"end":return t.stop()}}),t,null,[[4,15]])})))()},showAlert:function(e){var t=this;this.d_alertShow=!0,this.d_errorText=e,setTimeout((function(){t.d_alertShow=!1}),2e3)}},i18n:{messages:{zhCN:{"Copy failed!":"复制失败","Payment address cannot exceed 20 Each":"收款地址不能超过20个","Address has been copied to clipboard":"地址已经复制到剪贴板","New Address":"新地址","Old Address":"旧地址",Index:"索引",Address:"地址","More Address":"更多地址","Total Receive":"累积接收","No Record":"暂无记录","Get device address error":"获取设备地址错误","Please check the address in your device":"请在设备上核对地址"}}}},p=(r("82e2"),r("2877")),_=r("6544"),h=r.n(_),b=r("8336"),v=r("b0af"),m=r("a797"),x=r("1f4f"),g=r("2db4"),w=r("71a3"),y=r("c671"),k=r("fe57"),A=r("aac8"),C=Object(p.a)(f,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"receive-wrap"},[r("div",{directives:[{name:"show",rawName:"v-show",value:this.d_selectedId>-1,expression:"this.d_selectedId > -1"}],staticClass:"qr"},[r("div",{attrs:{id:"qrcode"}}),e.d_selectedId>-1?r("div",[e._v(e._s("m/"+this.c_protocol+"'/"+this.c_coinInfo.slip44+"'/0'/0/"+e.d_addressList[this.d_selectedId].index))]):e._e()]),r("v-snackbar",{attrs:{top:""},model:{value:e.d_alertShow,callback:function(t){e.d_alertShow=t},expression:"d_alertShow"}},[e._v(e._s(e.d_errorText))]),r("v-overlay",{model:{value:e.d_overlay,callback:function(t){e.d_overlay=t},expression:"d_overlay"}}),r("v-card",[r("v-tabs",{staticClass:"pa-6 pb-3",model:{value:e.d_tab,callback:function(t){e.d_tab=t},expression:"d_tab"}},[r("v-tab",[e._v(e._s(e.$t("New Address")))]),r("v-tab",[e._v(e._s(e.$t("Old Address")))])],1),r("v-tabs-items",{model:{value:e.d_tab,callback:function(t){e.d_tab=t},expression:"d_tab"}},[r("v-tab-item",[r("v-card",{staticClass:"pa-6 pt-0 d-flex flex-column justify-start",attrs:{flat:""}},[r("v-simple-table",{scopedSlots:e._u([{key:"default",fn:function(){return[r("thead",[r("tr",[r("th",{staticClass:"text-left"},[e._v(e._s(e.$t("Index")))]),r("th",{staticClass:"text-left"},[e._v(e._s(e.$t("Address")))])])]),r("tbody",e._l(e.d_addressList,(function(t,s){return r("tr",{key:s,staticStyle:{position:"relative"},on:{click:function(t){return e.clickAddress(s,t)}}},[r("td",{staticClass:"text-left"},[e._v(e._s(t.index))]),r("td",{staticClass:"text-left d-flex flex-row justify-start align-center",staticStyle:{cursor:"pointer"}},[r("span",{staticClass:"s-address caption pl-2 pr-2",class:e.d_selectedId===s?"highlight":""},[r("i",{staticClass:"icon mr-2",staticStyle:{"font-size":"18px"},domProps:{innerHTML:e._s(e.d_selectedId===s?"&#xe804;":"&#xe9cf;")},on:{click:function(t){return e.copyAddress(s)}}}),r("span",{domProps:{textContent:e._s(e.d_selectedId===s?t.newAddress:t.hideAddress)}})])]),e.d_selectedId===s?r("div",{staticClass:"d-flex justify-start align-center"},[r("span",{staticClass:"pr-2 pl-2 caption highlight-2"},[e._v(e._s(e.$t("Please check the address in your device")))])]):e._e()])})),0)]},proxy:!0}])}),r("v-btn",{staticClass:"d-flex mt-4",staticStyle:{width:"auto","max-width":"180px"},attrs:{medium:"",rounded:"",color:"primary"},on:{click:e.getAddr}},[r("i",{staticClass:"icon",staticStyle:{"font-size":"20px"}},[e._v("")]),r("span",[e._v(e._s(e.$t("More Address")))])])],1)],1),r("v-tab-item",[r("v-card",{staticClass:"pa-6 pt-0",attrs:{flat:""}},[r("v-simple-table",{scopedSlots:e._u([{key:"default",fn:function(){return[r("thead",[r("tr",[r("th",{staticClass:"text-left"},[e._v(e._s(e.$t("Index")))]),r("th",{staticClass:"text-left"},[e._v(e._s(e.$t("Address")))]),r("th",{staticClass:"text-left"},[e._v(e._s(e.$t("Total Receive")))])])]),e.d_receiveList.length?r("tbody",e._l(e.d_receiveList,(function(t,s){return r("tr",{key:s},[r("td",{staticClass:"text-left"},[e._v(e._s(s))]),r("td",{staticClass:"text-left d-flex flex-row justify-start align-center"},[r("span",{staticClass:"old-address body-2 pl-2 pr-2"},[e._v(e._s(t.name))])]),r("td",{staticClass:"text-left"},[r("span",{staticClass:"old-address body-2 pl-2 pr-2"},[e._v(e._s(e.receiveCoin(t.totalReceived)))])])])})),0):e._e()]},proxy:!0}])}),e.d_receiveList.length?e._e():r("div",{staticClass:"d-flex justify-center align-center body-2 mt-4 grey--text"},[e._v(e._s(e.$t("No Record")))])],1)],1)],1)],1)],1)}),[],!1,null,"7ff31ce9",null);t.default=C.exports,h()(C,{VBtn:b.a,VCard:v.a,VOverlay:m.a,VSimpleTable:x.a,VSnackbar:g.a,VTab:w.a,VTabItem:y.a,VTabs:k.a,VTabsItems:A.a})},"7a52":function(e,t,r){(t=r("24fb")(!1)).push([e.i,".receive-wrap[data-v-7ff31ce9]{position:relative;width:960px;margin:20px auto}.s-address[data-v-7ff31ce9]{width:300px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-flow:row nowrap;flex-flow:row nowrap;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;text-align:center;color:rgba(0,0,0,.2);border-radius:2px;border:1px dashed rgba(0,0,0,.2)}.old-address[data-v-7ff31ce9]{color:rgba(0,0,0,.6)}.highlight[data-v-7ff31ce9]{border:1px dashed red;background:#fff;color:red}.highlight[data-v-7ff31ce9],.highlight-2[data-v-7ff31ce9]{position:relative;z-index:99999}.highlight-2[data-v-7ff31ce9]{border-radius:4px;top:-5px;left:15px;background:rgba(0,0,0,.8);color:#fff}#qrcode[data-v-7ff31ce9]{display:inline-block}#qrcode img[data-v-7ff31ce9]{width:132px;height:132px}.qr[data-v-7ff31ce9]{position:fixed;z-index:99999;padding:6px;background:#fff;right:20%;top:30%}",""]),e.exports=t},"82e2":function(e,t,r){"use strict";var s=r("ac4d");r.n(s).a},ac4d:function(e,t,r){var s=r("7a52");"string"==typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals),(0,r("499e").default)("211b5192",s,!0,{sourceMap:!1,shadowMode:!1})},c947:function(e,t,r){"use strict";r.d(t,"b",(function(){return s})),r.d(t,"a",(function(){return a}));var s={};r.r(s),r.d(s,"HistoryByXpub",(function(){return f})),r.d(s,"TxSpecific",(function(){return p})),r.d(s,"HistoryByAddress",(function(){return _})),r.d(s,"HistoryByContract",(function(){return h})),r.d(s,"GetUtxoByXpub",(function(){return b})),r.d(s,"GetTxDetial",(function(){return v})),r.d(s,"GetRecommendFee",(function(){return m})),r.d(s,"BalanceByAddress",(function(){return x}));var a={};r.r(a),r.d(a,"Coin2Cash",(function(){return g})),r("99af"),r("c975"),r("d3b7"),r("96cf");var n=r("1da1"),c=r("cebe"),o=r.n(c),d=r("0613"),i=function(e){var t="Request Error";switch(e.status){case 400:t="Request Error";break;case 401:t="Unauthorized, please login";break;case 403:t="Access denied";break;case 404:t="Request address error";break;case 408:t="Request timeout";break;case 500:t="Internal server error";break;case 501:t="Service not implemented";break;case 502:t="Gateway error";break;case 503:t="Service is not available";break;case 504:t="Gateway timeout";break;case 505:t="HTTP version is not supported"}return t},u=o.a.create({baseURL:"https://api.abckey.com",timeout:1e4});u.interceptors.request.use(function(){var e=Object(n.a)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(navigator.onLine){e.next=3;break}return d.a.__s("httpMessage","Request Error"),e.abrupt("return",Promise.reject(new Error("Request Error")));case 3:return e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),u.interceptors.response.use(function(){var e=Object(n.a)(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(200!==t.status){e.next=8;break}if(!t){e.next=5;break}return e.abrupt("return",Promise.resolve(t));case 5:return e.abrupt("return",Promise.reject(t));case 6:e.next=11;break;case 8:return r=i(t),d.a.__s("httpMessage",r),e.abrupt("return",Promise.reject(t));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),(function(e){var t,r,s=e.message||"";if(e.message&&(s=e.message),e.response&&(s=e.response.data.msg),s.indexOf("timeout")>=0&&(s="timeout"),d.a.__s("httpMessage",s),401!==(null==e||null===(t=e.response)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.code))return Promise.reject(e)}));var l=u,f=function(e){return l.get("/".concat(e.coinName,"/xpub/").concat(e.xpub),{params:{t:(new Date).getTime(),details:"txs",tokens:"used"}}).then((function(e){return e.data}))},p=function(e){return l.get("/".concat(e.coinName,"/tx-specific/").concat(e.txid),{params:{t:(new Date).getTime()}}).then((function(e){return e.data}))},_=function(e){return l.get("/".concat(e.coinName,"/address/").concat(e.address),{params:{t:(new Date).getTime(),details:"txs",page:1,pageSize:1e3}}).then((function(e){return e.data}))},h=function(e){return l.get("/".concat(e.coinName,"/address/").concat(e.address),{params:{t:(new Date).getTime(),details:"txs",contract:e.contract}}).then((function(e){return e.data}))},b=function(e){return l.get("/".concat(e.coinName,"/utxo/").concat(e.xpub),{params:{t:(new Date).getTime(),confirme:!0}}).then((function(e){return e.data}))},v=function(e){return l.get("/".concat(e.coinName,"/tx/").concat(e.txid),{params:{t:(new Date).getTime()}}).then((function(e){return e.data}))},m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"btc";return"btc"!==(e=e.toLowerCase())?l.get("https://api.abckey.com/fees/".concat(e),{params:{t:(new Date).getTime()}}).then((function(e){return e.data})):l.get("https://bitcoinfees.earn.com/api/v1/fees/recommended",{params:{t:(new Date).getTime()}}).then((function(e){return e.data}))},x=function(e){return l.get("/".concat(e.coinName,"/address/").concat(e.address),{params:{t:(new Date).getTime(),details:"basic"}}).then((function(e){return e.data}))},g=function(e){var t="";switch(e.coinName.toLowerCase()){case"tbtc":t="btc";break;case"trop":t="eth";break;case"tusdt":t="usdt";break;default:t=e.coinName.toLowerCase()}return l.get("/market/".concat(t,"/").concat(e.cashName.toLowerCase()),{params:{t:(new Date).getTime()}}).then((function(e){return e.data}))}}}]);