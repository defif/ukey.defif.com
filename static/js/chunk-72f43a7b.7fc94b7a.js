(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-72f43a7b"],{"3dad":function(e,t,s){"use strict";s.r(t);var r=(s("99af"),s("cb29"),s("a15b"),s("fb6a"),s("d3b7"),s("c760"),s("25f0"),s("96cf"),s("1da1")),a=s("5530"),d=s("c9c7"),n=s.n(d),o=s("d044"),i=s.n(o),c=s("5880"),l=s("48b8"),u=s("7ca6"),p=s("cebe"),_=s.n(p),f={name:"Receive",mixins:[u.a],data:function(){return{d_maxReceiveAddress:20,d_tab:null,d_overlay:!1,d_snackbar:!1,d_receiveList:[],d_addressList:[],d_selectedId:-1,d_currentInex:0,d_currentAddress:"0",d_alertShow:!1,d_errorText:""}},computed:Object(a.a)(Object(a.a)({},Object(c.mapState)(["usb","pageLoading"])),{},{c_coinInfo:function(e){return e.$store.__s("coinInfo")},c_chooseType:function(e){return e.$store.__s("dialog.chooseType")},c_protocol:function(){return Reflect.has(this.c_coinInfo.bip,"49")?49:44}}),watch:{c_chooseType:function(e){e&&this._hideOverlay()}},created:function(){this.getUsedTokens()},methods:{receiveCoin:function(e){return n()(e,"sat_".concat(this.c_coinInfo.symbol)).toString()},clickAddress:function(e,t){this.d_overlay||this._showOverlay(e,t)},_showOverlay:function(e,t){var s=this;return Object(r.a)(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return s.d_selectedId=e,s._qrcode(s.d_addressList[s.d_selectedId].newAddress),a=Object(l.b)(t),s.d_overlay=!0,document.getElementsByClassName("qr")[0].style.top=a.y-80+"px",r.next=7,s.$usb.cmd("EthereumGetAddress",{address_n:[(2147483648|s.c_protocol)>>>0,(2147483648|s.coinInfo.slip44)>>>0,2147483648,0,s.$store.__s("eth.account")],show_display:!0});case 7:s._hideOverlay();case 8:case"end":return r.stop()}}),r)})))()},_hideOverlay:function(){this.d_selectedId=-1,this.d_overlay=!1},_qrcode:function(e){return document.getElementById("qrcode").innerHTML="",new i.a("qrcode",{width:132,height:132,text:e,colorDark:"#000",colorLight:"#fff"})},copyAddress:function(){if(this.d_overlay)try{Object(l.a)(this.d_addressList[this.d_selectedId].newAddress),this.showAlert(this.$t("Address has been copied to clipboard"))}catch(e){this.showAlert(this.$t("Copy failed!"))}},getUsedTokens:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var s;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.$store.__s("pageLoading",!0),s=null,t.prev=2,t.next=5,_()({method:"get",url:"https://api.abckey.com/".concat(e.coinInfo.symbol,"/xpub/").concat(e.usb.xpub,"?details=txs&tokens=used&t=").concat((new Date).getTime()),timeout:1e4});case 5:s=t.sent,t.next=12;break;case 8:t.prev=8,t.t0=t.catch(2),e.$store.__s("pageLoading",!1),e.$message.error(e.$t("Network Error!"));case 12:e.d_receiveList=s.data.tokens?s.data.tokens:[],e.d_currentInex="0",e.d_currentAddress=0,e.getAddr(),e.$store.__s("pageLoading",!1);case 17:case"end":return t.stop()}}),t,null,[[2,8]])})))()},getAddr:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var s,r,a,d;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e.d_addressList.length>e.d_maxReceiveAddress)){t.next=4;break}return e.showAlert(e.$t("Payment address cannot exceed 20 Each")),e.$store.__s("pageLoading",!1),t.abrupt("return");case 4:return t.prev=4,t.next=7,e.$usb.cmd("EthereumGetAddress",{address_n:[(2147483648|e.c_protocol)>>>0,(2147483648|e.coinInfo.slip44)>>>0,2147483648,0,e.$store.__s("eth.account")],show_display:!1});case 7:s=t.sent,e.d_currentAddress=s.data.address,r=e.d_currentAddress.length,a=e.d_currentAddress.slice(0,4)+new Array(r-8).fill("#").join("")+e.d_currentAddress.slice(r-8+4),d={index:e.d_currentInex++,newAddress:e.d_currentAddress,hideAddress:a},e.d_addressList.push(d),t.next=18;break;case 15:t.prev=15,t.t0=t.catch(4),e.showAlert(e.$t("Get device address error"));case 18:case"end":return t.stop()}}),t,null,[[4,15]])})))()},showAlert:function(e){var t=this;this.d_alertShow=!0,this.d_errorText=e,setTimeout((function(){t.d_alertShow=!1}),2e3)}},i18n:{messages:{zhCN:{"PS: For the ETH currency, only fixed address collection is currently supported. In subsequent versions, we will support obtaining multiple address collections.":"备注：针对ETH币种，当前仅支持固定地址收款，后续版本我们将支持获取多个地址收款。","Copy failed!":"复制失败","Payment address cannot exceed 20 Each":"收款地址不能超过20个","Address has been copied to clipboard":"地址已经复制到剪贴板","New Address":"新地址","Old Address":"旧地址",Index:"索引",Address:"地址","More Address":"更多地址","Total Receive":"累积接收","No Record":"暂无记录","Get device address error":"获取设备地址错误","Please check the address in your device":"请在设备上核对地址,并在设备上执行确认操作"}}}},h=(s("e027"),s("2877")),v=s("6544"),b=s.n(v),x=s("b0af"),m=s("ce7e"),g=s("a797"),y=s("1f4f"),w=s("2db4"),k=s("71a3"),A=s("c671"),C=s("fe57"),I=s("aac8"),$=Object(h.a)(f,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"receive-wrap"},[s("div",{directives:[{name:"show",rawName:"v-show",value:this.d_selectedId>-1,expression:"this.d_selectedId > -1"}],staticClass:"qr"},[s("div",{attrs:{id:"qrcode"}}),e.d_selectedId>-1?s("div",[e._v(e._s("m/"+this.c_protocol+"'/"+this.c_coinInfo.slip44+"'/0'/0/"+e.$store.__s("eth.account")))]):e._e()]),s("v-snackbar",{attrs:{top:""},model:{value:e.d_alertShow,callback:function(t){e.d_alertShow=t},expression:"d_alertShow"}},[e._v(e._s(e.d_errorText))]),s("v-overlay",{attrs:{"z-index":"99999"},model:{value:e.d_overlay,callback:function(t){e.d_overlay=t},expression:"d_overlay"}}),s("v-card",[s("v-tabs",{staticClass:"pa-6 pb-3",model:{value:e.d_tab,callback:function(t){e.d_tab=t},expression:"d_tab"}},[s("v-tab",[e._v(e._s(e.$t("New Address")))])],1),s("v-tabs-items",{model:{value:e.d_tab,callback:function(t){e.d_tab=t},expression:"d_tab"}},[s("v-tab-item",[s("v-card",{staticClass:"pa-6 pt-0 d-flex flex-column justify-start",attrs:{flat:""}},[s("v-simple-table",{scopedSlots:e._u([{key:"default",fn:function(){return[s("thead",[s("tr",[s("th",{staticClass:"text-left"},[e._v(e._s(e.$t("Index")))]),s("th",{staticClass:"text-left"},[e._v(e._s(e.$t("Address")))])])]),s("tbody",e._l(e.d_addressList,(function(t,r){return s("tr",{key:r,staticStyle:{position:"relative"},on:{click:function(t){return e.clickAddress(r,t)}}},[s("td",{staticClass:"text-left"},[e._v(e._s(e.$store.__s("eth.account")))]),s("td",{staticClass:"text-left d-flex flex-row justify-start align-center",staticStyle:{cursor:"pointer"}},[s("span",{staticClass:"s-address caption",class:e.d_selectedId===r?"highlight":""},[s("i",{staticClass:"icon mr-1",staticStyle:{"font-size":"18px"},domProps:{innerHTML:e._s(e.d_selectedId===r?"&#xe804;":"&#xe9cf;")},on:{click:function(t){return e.copyAddress(r)}}}),s("span",{domProps:{textContent:e._s(e.d_selectedId===r?t.newAddress:t.hideAddress)}})])]),e.d_selectedId===r?s("div",{staticClass:"d-flex justify-start align-center"},[s("span",{staticClass:"pr-2 pl-2 caption highlight-2"},[e._v(e._s(e.$t("Please check the address in your device")))])]):e._e()])})),0)]},proxy:!0}])}),s("v-divider"),s("span",{staticClass:"d-flex mt-4 ml-2 mr-2 body-2 text-start"},[e._v(e._s(e.$t("PS: For the ETH currency, only fixed address collection is currently supported. In subsequent versions, we will support obtaining multiple address collections.")))])],1)],1),s("v-tab-item",[s("v-card",{staticClass:"pa-6 pt-0",attrs:{flat:""}},[s("v-simple-table",{scopedSlots:e._u([{key:"default",fn:function(){return[s("thead",[s("tr",[s("th",{staticClass:"text-left"},[e._v(e._s(e.$t("Index")))]),s("th",{staticClass:"text-left"},[e._v(e._s(e.$t("Address")))]),s("th",{staticClass:"text-left"},[e._v(e._s(e.$t("Total Receive")))])])]),e.d_receiveList.length?s("tbody",e._l(e.d_receiveList,(function(t,r){return s("tr",{key:r},[s("td",{staticClass:"text-left"},[e._v(e._s(r))]),s("td",{staticClass:"text-left d-flex flex-row justify-start align-center"},[s("span",{staticClass:"old-address body-2 pl-2 pr-2"},[e._v(e._s(t.name))])]),s("td",{staticClass:"text-left"},[s("span",{staticClass:"old-address body-2 pl-2 pr-2"},[e._v(e._s(e.receiveCoin(t.totalReceived)))])])])})),0):e._e()]},proxy:!0}])}),e.d_receiveList.length?e._e():s("div",{staticClass:"d-flex justify-center align-center body-2 mt-4 grey--text"},[e._v(e._s(e.$t("No Record")))])],1)],1)],1)],1)],1)}),[],!1,null,"28e4df75",null);t.default=$.exports,b()($,{VCard:x.a,VDivider:m.a,VOverlay:g.a,VSimpleTable:y.a,VSnackbar:w.a,VTab:k.a,VTabItem:A.a,VTabs:C.a,VTabsItems:I.a})},c1b7:function(e,t,s){var r=s("c365");"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals),(0,s("499e").default)("11b25929",r,!0,{sourceMap:!1,shadowMode:!1})},c365:function(e,t,s){(t=s("24fb")(!1)).push([e.i,".receive-wrap[data-v-28e4df75]{width:960px;margin:20px auto}.s-address[data-v-28e4df75]{width:auto;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-flow:row nowrap;flex-flow:row nowrap;-webkit-box-pack:start;-ms-flex-pack:start;justify-content:flex-start;-webkit-box-align:center;-ms-flex-align:center;align-items:center;text-align:center;padding:0 10px;color:rgba(0,0,0,.2);border-radius:2px;border:1px dashed rgba(0,0,0,.2)}.old-address[data-v-28e4df75]{color:rgba(0,0,0,.6)}.highlight[data-v-28e4df75]{position:relative;z-index:99999;border:1px dashed red;background:#fff;color:red}.highlight-2[data-v-28e4df75]{position:relative;z-index:999999;border-radius:4px;top:-5px;left:15px;background:rgba(0,0,0,.8);color:#fff}#qrcode[data-v-28e4df75]{display:inline-block}#qrcode img[data-v-28e4df75]{width:132px;height:132px}.qr[data-v-28e4df75]{position:fixed;z-index:9999999;padding:6px;background:#fff;right:20%;top:30%}@media screen and (max-width:1100px){.qr[data-v-28e4df75]{position:absolute!important;width:150px;z-index:9999999;margin-top:50px;left:175px!important;padding:6px;margin-top:140px;background:#fff}}",""]),e.exports=t},e027:function(e,t,s){"use strict";var r=s("c1b7");s.n(r).a}}]);